<VirtualHost *:80>
    ServerName fourgmovil.onrender.com
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html/public

    <Directory /var/www/html/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted

        # Reforzamos RewriteEngine (aunque Laravel ya tiene .htaccess)
        <IfModule mod_rewrite.c>
            RewriteEngine On
        </IfModule>
    </Directory>

    # Configuración específica para archivos estáticos (imágenes, CSS, JS)
    <Directory /var/www/html/public/storage>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
        
        # Headers de cache para archivos estáticos
        <IfModule mod_headers.c>
            Header set Cache-Control "public, max-age=31536000"
        </IfModule>
    </Directory>

    # Configuración para archivos de imágenes
    <LocationMatch "\.(jpg|jpeg|png|gif|ico|svg|webp)$">
        <IfModule mod_headers.c>
            Header set Cache-Control "public, max-age=31536000"
        </IfModule>
    </LocationMatch>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
